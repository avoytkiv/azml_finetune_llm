name: sky-vscode
resources:
  accelerators: T4:1
  cloud: aws
  region: us-west-1
  instance_type: g4dn.2xlarge
  cpus: 8
  image_id: ami-0d85eb7b91911c834 
workdir: ~/azml_finetune_llm 
file_mounts:
  /data: ~/azml_finetune_llm/data
  ~/sky_workdir/checkpoints: 
    source: s3://hotel-reviews-skypilot
    mode: MOUNT 
  ~/sky_workdir/models:
    source: s3://hotel-reviews-skypilot
    mode: MOUNT 
  ~/.ssh/id_ed25519: ~/.ssh/id_ed25519
  ~/.ssh/id_ed25519.pub: ~/.ssh/id_ed25519.pub
  ~/.gitconfig: ~/.gitconfig
setup: | 
  pip install --upgrade pip
  pip install -r requirements.txt
run: |
  cd ~/sky_workdir
  source activate pytorch
  dvc exp run 
